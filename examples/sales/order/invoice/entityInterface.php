<?php
/**
 * BIT Tools Platform | B2W - Companhia Digital
 *
 * Do not edit this file if you want to update this module for future new versions.
 *
 * @category  BSeller
 * @package   BSeller
 *
 * @copyright Copyright (c) 2018 B2W Digital - BIT Tools Platform.
 *
 * @author    Julio Reis <julio.reis@b2wdigital.com>
 */

include __DIR__ . '/../../../api.php';

/** @var \BSeller\Api\EntityInterface\Sales\Order\Invoice $entityInterface */
$entityInterface = $api->invoice()
    ->entityInterface();

/**
 * APPROVE PAYMENT
 */
$orderId = '123123123';
$transactionDate = '2018-05-04T13:10:44.000Z';
$bankCode = '123';
$agencyCode = '12349';
$accountNumber = '123456789';
$returningCode = 0;

$entityInterface->setOrderId($orderId)
    ->setTransactionDate($transactionDate)
    ->setBankCode($bankCode)
    ->setAgencyCode($agencyCode)
    ->setAccountNumber($accountNumber)
    ->setReturningCode($returningCode);

/**
 * SEND INVOICE TO BSELLER
 *
 * @var BSeller\Api\Handler\Response\HandlerInterface $response
 */
$response = $entityInterface->create();
var_dump($response->body());

/**
 * REPROVE INVOICE AT BSELLER
 *
 * @var BSeller\Api\Handler\Response\HandlerInterface $response
 */
$response = $entityInterface->reprove($orderId);
var_dump($response->body());